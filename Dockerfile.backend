# Dockerfile.backend
FROM node:14

# Set working directory
WORKDIR /usr/src/app

# Copy backend package.json and package-lock.json
COPY backend/package.json backend/package-lock.json ./

# Install dependencies
RUN npm install --prefer-offline --no-audit --progress=false --no-fund

# Copy all backend files
COPY backend .

# Copy the data folder to ensure the JSON files are available during the build
COPY src/data /usr/src/app/data

# Expose the port the app runs on
EXPOSE 5000

# Start the app
CMD ["node", "server.js"]
